"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[622],{622:function(e,n,t){t.r(n),t.d(n,{default:function(){return C}});var r,i,a,o,c,l=t(2982),s=t(885),u=t(3129),d=t(8647),m=t(2791),f=t(3504),p=t(5705),h=t(168),v=t(6444),x=(0,v.ZP)(p.l0)(r||(r=(0,h.Z)(["\n  display: inline-flex;\n  flex-direction: column;\n  align-items: flex-start;\n"]))),g=(0,v.ZP)(p.gN)(i||(i=(0,h.Z)(["\n  min-width: 300px;\n  padding: 5px;\n  margin-right: 20px;\n"]))),Z=(0,v.ZP)(p.Bc)(a||(a=(0,h.Z)(["\n  color: red;\n  font-style: italic;\n"]))),y=v.ZP.button(o||(o=(0,h.Z)(["\n  margin-top: 20px;\n  margin-bottom: 20px;\n  padding: 5px;\n"]))),j=t(4386),b=t(184),k=j.Ry().shape({query:j.Z_().lowercase().trim().required()}),_=function(){var e=(0,f.lr)(),n=(0,s.Z)(e,2),t=n[0],r=n[1],i={query:t.get("query")||""};return(0,b.jsx)(p.J9,{initialValues:i,validationSchema:k,onSubmit:function(e,n){r({query:e.query.toLowerCase().trim()})},children:(0,b.jsxs)(x,{children:[(0,b.jsxs)("label",{htmlFor:"query",children:[(0,b.jsx)(g,{type:"text",name:"query",placeholder:"Search movie",autoComplete:"off"}),(0,b.jsx)(Z,{name:"query",component:"span"})]}),(0,b.jsx)(y,{type:"submit",children:"Search movie"})]})})},q=t(3061),w=t(6871),S=t(4635),P=v.ZP.div(c||(c=(0,h.Z)(["\n  margin-left: 20px;\n"])));function C(e){var n=e.getSearchQueryBar,t=(0,f.lr)(),r=(0,s.Z)(t,1)[0].get("query")||"",i=(0,w.TH)().pathname,a=(0,m.useState)(null),o=(0,s.Z)(a,2),c=o[0],p=o[1],h=(0,m.useState)("idle"),v=(0,s.Z)(h,2),x=v[0],g=v[1];return(0,m.useEffect)((function(){if(g("pending"),p(null),!r)return p(null),void g("idle");setTimeout((function(){S.Z.api(i,r).then((function(e){if(!e.data.results.length)return p(null),g("rejected"),void console.log("\u043f\u0443\u0441\u0442\u043e");p((0,l.Z)(e.data.results)),g("resolved"),console.log("\u0435\u0441\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441")}))}),500)}),[r,i]),(0,b.jsxs)(P,{children:[(0,b.jsx)(_,{getSearchQueryBar:n}),"pending"===x&&(0,b.jsx)(u.Z,{}),c&&(0,b.jsx)(d.Z,{data:c}),"idle"===x&&(0,b.jsxs)("div",{children:["\u0437\u0434\u0435\u0441\u044c \u0441\u043a\u043e\u0440\u043e \u043f\u043e\u044f\u0432\u044f\u0442\u0441\u044f \u0444\u0438\u043b\u044c\u043c\u044b, ",(0,b.jsx)(q.bbr,{})," \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043b\u043e\u0432\u043e \u043f\u043e\u0438\u0441\u043a\u0430"," "]}),"rejected"===x&&(0,b.jsx)("div",{children:"\u043d\u0435\u0442 \u0442\u0430\u043a\u043e\u0433\u043e \u0432 \u043f\u043e\u0438\u0441\u043a\u0435"})]})}},8647:function(e,n,t){t.d(n,{Z:function(){return p}});var r,i,a,o=t(3504),c=t(6871),l=t(168),s=t(6444),u=s.ZP.p(r||(r=(0,l.Z)(["\n  color: #000;\n  font-size: larger;\n\n  :hover {\n    color: green;\n    text-decoration: underline;\n  }\n"]))),d=s.ZP.ul(i||(i=(0,l.Z)(["\n  margin-left: 20px;\n"]))),m=s.ZP.li(a||(a=(0,l.Z)(["\n  :not(:last-child) {\n    margin-bottom: 5px;\n  }\n"]))),f=t(184);function p(e){var n=e.data,t=(0,c.TH)();return(0,f.jsx)(d,{children:n.map((function(e){return(0,f.jsx)(m,{children:(0,f.jsx)(o.rU,{to:"/movies/".concat(e.id),state:{movie_id:e.id,from:t},children:(0,f.jsx)(u,{children:e.title})})},e.id)}))})}},4635:function(e,n,t){var r=t(4569),i="f3d33ff00cd7667f5ad243a04605493c";r.defaults.baseURL="https://api.themoviedb.org/3/";var a={api:function(e,n){var t=!1;switch(e){case"/":t="trending/movie/day?api_key=".concat(i);break;case"/movies":t="search/movie?api_key=".concat(i,"&language=en-US&query=").concat(n,"&page=1&include_adult=false");break;case"/movies/":t="movie/".concat(n,"?api_key=").concat(i);break;case"/movies/".concat(n,"/review"):t="movie/".concat(n,"/reviews?api_key=").concat(i);break;case"/movies/".concat(n,"/cast"):t="movie/".concat(n,"/credits?api_key=").concat(i);break;default:return void console.log("NOT")}if(t)return r.get("".concat(t)).then((function(e){return e}))}};n.Z=a}}]);
//# sourceMappingURL=622.a8ff63c3.chunk.js.map